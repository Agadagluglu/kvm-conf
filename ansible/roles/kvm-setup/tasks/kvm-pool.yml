---
- name: copy template from ansible to the remote host
  copy: src=/home/apunch/kvm-conf/ansible/roles/kvm-setup/files/pool/dir.xml dest=/opt/dir.xml

- name: build a pool for kvm
  virt_pool: command=define name=vpool xml=/opt/dir.xml
  
- name: build pool if it does not exist
  virt_pool: command=build name=vpool
  
- name: start the pool
  virt_pool: command=create name=vpool
  
- name: ensure the pool is autostart
  virt_pool: autostart=yes name=vpool